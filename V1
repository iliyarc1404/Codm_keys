<?xml version="1.0" encoding="utf-8"?>
<CheatTable CheatEngineTableVersion="45">
  <CheatEntries/>
  <UserdefinedSymbols/>
  <LuaScript>

-- تابع جایگزینی AOB
function AOBRep(search, change)
    local aob = AOBScan(search)
    if aob then
        for i=0,aob.Count-1 do
            autoAssemble(aob[i]..':\ndb '..change)
        end
        aob.Destroy()
    end
end

-- وضعیت Teleport
TeleportState = false

-- تابع Toggle Teleport
function ToggleTeleport()
    if TeleportState then
        AOBRep('00 00 C8 47 00 00 C8 47 00 00 C8 47 00 00 C8 47',
               'C3 F5 88 40 CD CC 4C 40 CD CC 4C 40 00 00 00 3F')
        showMessage("Teleport OFF")
        TeleportState = false
    else
        AOBRep('C3 F5 88 40 CD CC 4C 40 CD CC 4C 40 00 00 00 3F',
               '00 00 C8 47 00 00 C8 47 00 00 C8 47 00 00 C8 47')
        showMessage("Teleport ON")
        TeleportState = true
    end
end

-- نمایش منوی اصلی
function startmenu()
    local p = io.popen('tasklist /fi "IMAGENAME eq '..emu..'.exe" /fi "MEMUSAGE gt 300000" /nh', 'r')
    local procInfo = p:read('*a')
    p:close()
    local pid = tonumber(procInfo:match('%d+'))

    if not pid then
        messageDialog("You Must Start The CODM First!", mtWarning, mbOK)
        closeCE()
    else
        openProcess(pid)

        local MyForm = createForm(true)
        MyForm.Caption = 'CODM Cheat - Teleport'
        MyForm.Width = 240
        MyForm.Height = 200

        local b = createButton(MyForm)
        b.Left = 20
        b.Top = 40
        b.Width = 200
        b.Height = 60
        b.Caption = 'Telport'
        b.onClick = ToggleTeleport

        -- اضافه کردن Label پایین منو
        local l = createLabel(MyForm)
        l.Left = 20
        l.Top = 120
        l.Width = 200
        l.Height = 20
        l.Caption = 'Cheat made by ILIYA RC '
        l.Alignment = taCenter
    end
end

-- انتخاب شبیه‌ساز
emu = nil
local EmuForm = createForm(true)
EmuForm.Caption = 'Select Emulator'
EmuForm.Width = 300
EmuForm.Height = 60

local EmuButton1 = createButton(EmuForm)
EmuButton1.Left = 10
EmuButton1.Top = 10
EmuButton1.Width = 280
EmuButton1.Height = 40
EmuButton1.Caption = 'Gameloop'
EmuButton1.onClick = function()
    emu = "aow_exe"
    startmenu()
    EmuForm.hide()
end

  </LuaScript>
</CheatTable>
